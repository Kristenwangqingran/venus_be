openapi: 3.0.1
info:
  title: venus_BE
  contact:
    name: venus_BE
    email: venus_BE@shopee.com
  version: "1.0"

externalDocs:
  description: 更多内容请点击这里
  url: https://confluence.shopee.io/pages/viewpage.action?pageId=155043601

servers:
  - url: http://10.12.78.89:8001/api
    description: test-ENV
  - url: http://10.105.38.68:8001/api
    description: IDC-ENV
  - url: http://venus.qa.sz.shopee.io:8001/api
    description: live-ENV
  - url: http://localhost:8001/api
    description: dev-env

components:
  schemas:
    apicontent:
      type: object
      properties:
        path:
          type: string
          example: /apis
        method:
          type: string
          example: post
        headers:
          type: object
        data:
          type: object
        variables:
          type: object
        extract:
          type: object
        validate:
          type: array
          items:
            type: object
        export:
          type: array
          items:
            type: string
        setup_hooks:
          type: array
          items:
            type: string
        teardown_hooks:
          type: array
          items:
            type: string
    casecontent:
      type: object
      properties:
        headers:
          type: object
        variables:
          type: object
        parameters:
          type: object
        export:
          type: array
          items:
            type: string
        setup_hooks:
          type: array
          items:
            type: string
        teardown_hooks:
          type: array
          items:
            type: string
        steps:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              mate_type: #api/case/request
                type: string
              obj:
                type: integer
              variables:
                type: object
              headers:
                type: object
              data:
                type: object
              extract:
                type: object
              validate:
                type: array
                items:
                  type: object
              export:
                type: array
                items:
                  type: string
              setup_hooks:
                type: array
                items:
                  type: string
              teardown_hooks:
                type: array
                items:
                  type: string
    caseresultdeteil:
      type: object
      properties:
        in_out:
          type: object
          properties:
            config_vars:
              type: object
            export_vars:
              type: object
        log:
          type: string
        html_file:
          type: string
        steps:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              status:
                type: string
              request:
                type: object
              response:
                type: object
              validators:
                type: array
                items:
                  type: object
              errors:
                type: string
    schedule:
      type: object
      properties:
        status:
          type: string
          example: disabled/enabled
        trigger:
          type: string
          example: interval/cron
        time_info:
          type: object
          properties:
            seconds:
              type: integer
              example: only when trigger is interval, this field will take effect
            year:
              type: string
              example: cron format
            month:
              type: string
              example: cron format
            day_of_week:
              type: string
              example: cron format
            day:
              type: string
              example: cron format
            hour:
              type: string
              example: cron format
            minute:
              type: string
              example: cron format
            second:
              type: string
              example: cron format
        env_id:
          type: integer

tags:
  - name: 部门管理
    description: 部门管理相关接口
  - name: 产品线管理
    description: 产品线管理相关接口
  - name: member成员管理
    description: member成员管理
  - name: 项目管理
    description: 项目管理相关接口
  - name: 测试集管理
    description: 测试集管理相关接口
  - name: 测试集报告管理
    description: 测试集报告管理相关接口
  - name: 用例管理
    description: 用例管理相关接口
  - name: 用例报告管理
    description: 用例报告管理相关接口
  - name: worker
    description: worker相关接口
  - name: goc
    description: goc相关接口
  - name: Spex管理
    description: Spex相关资源管理
  - name: Http管理
    description: Http相关资源管理
  - name: Health Check
    description: Health Check
  - name: postwomen 管理
    description: postwomen 管理
  - name: others
    description: ohers相关接口
  - name: openapi
    description: openapi相关接口

paths:
  /devices:
    get:
      tags:
        - others
      summary: 获取设备列表

      responses:
        200:
          description: 设备列表数据
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    post:
      tags:
        - others
      summary: check
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                device_id:
                  type: string
                action:
                  type: string

      responses:
        200:
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /departments:
    get:
      tags:
        - 部门管理
      summary: 获取所有的部门

      responses:
        200:
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: []

  /productlines:
    get:
      tags:
        - 产品线管理
      summary: 获取各个业务线，数据来源于cap
      parameters:
        - name: product_line_id
          in: query
          description: 产品线id
          example: 28
          required: true
          schema:
            type: integer
        - name: sub_line
          in: query
          description: 二级产品线的名字
          required: true
          schema:
            type: string
      responses:
        200:
          description: 产品线获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: []

  /productlines/selector:
    get:
      tags:
        - 产品线管理
      summary: 获取产品线列表
      parameters:
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string

      responses:
        200:
          description: 产品线列表数据
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: []

  /product_lines:
    get:
      tags:
        - 产品线管理
      summary: 查询所有 product line

      responses:
        200:
          description: 产品线获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: []

    post:
      tags:
        - 产品线管理
      summary: 新增product line
      parameters:
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                department:
                  type: string

        required: true

      responses:
        200:
          description: 新增成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /product_line/{product_line_id}:
    get:
      tags:
        - 产品线管理
      summary: 获取指定product line
      parameters:
        - name: product_line_id
          in: path
          description: product line id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 产品线获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example: { "id": 1, "name": "test", "department": "MP" }

    put:
      tags:
        - 产品线管理
      summary: 更新 product line
      parameters:
        - name: product_line_id
          in: path
          description: product line id
          required: true
          schema:
            type: integer
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                department:
                  type: string

        required: true

      responses:
        200:
          description: 产品线信息更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    delete:
      tags:
        - 产品线管理
      summary: 删除某个产品线信息
      parameters:
        - name: product_line_id
          in: path
          description: product line id
          required: true
          schema:
            type: integer
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string

      responses:
        200:
          description: 删除产品线信息成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /sub_lines/{product_line_id}:
    get:
      tags:
        - 产品线管理
      summary: 查询product line下的所有sub line
      parameters:
        - name: product_line_id
          in: path
          description: product line id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 产品线获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example:
                      [
                        {
                          "id": 1,
                          "name": "test",
                          "product_line_id": 1,
                          "product_line": "test",
                        },
                      ]

  /sub_line:
    post:
      tags:
        - 产品线管理
      summary: 新增sub line
      parameters:
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                product_line_id:
                  type: integer

        required: true

      responses:
        200:
          description: 新增成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /sub_line/{sub_line_id}:
    get:
      tags:
        - 产品线管理
      summary: 获取指定sub line
      parameters:
        - name: sub_line_id
          in: path
          description: sub line id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 产品线获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      {
                        "id": 1,
                        "name": "test",
                        "product_line_id": 1,
                        "product_line": "test",
                      }

    put:
      tags:
        - 产品线管理
      summary: 更新 sub line
      parameters:
        - name: sub_line_id
          in: path
          description: sub line id
          required: true
          schema:
            type: integer
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                product_line_id:
                  type: integer

        required: true

      responses:
        200:
          description: sub line信息更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    delete:
      tags:
        - 产品线管理
      summary: 删除sub line
      parameters:
        - name: sub_line_id
          in: path
          description: sub line id
          required: true
          schema:
            type: integer
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string

      responses:
        200:
          description: 删除产品线信息成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /features/{sub_line_id}:
    get:
      tags:
        - 产品线管理
      summary: 查询sub line下的所有feature
      parameters:
        - name: sub_line_id
          in: path
          description: sub line id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 产品线获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example:
                      [
                        {
                          "id": 1,
                          "name": "test",
                          "product_line": "test",
                          "sub_line": "sub_line",
                          "sub_line_id": 1,
                          "product_line_id": 1,
                        },
                      ]

  /feature:
    post:
      tags:
        - 产品线管理
      summary: 新增feature
      parameters:
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                sub_line_id:
                  type: integer

        required: true

      responses:
        200:
          description: 新增成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /feature/{feature_id}:
    get:
      tags:
        - 产品线管理
      summary: 获取指定feature
      parameters:
        - name: feature_id
          in: path
          description: feature id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 产品线获取成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      {
                        "id": 1,
                        "name": "test",
                        "product_line": "test",
                        "sub_line": "sub_line",
                        "sub_line_id": 1,
                        "product_line_id": 1,
                      }

    put:
      tags:
        - 产品线管理
      summary: 更新feature
      parameters:
        - name: feature_id
          in: path
          description: feature id
          required: true
          schema:
            type: integer
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                sub_line_id:
                  type: integer

        required: true

      responses:
        200:
          description: 更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    delete:
      tags:
        - 产品线管理
      summary: 删除feature
      parameters:
        - name: feature_id
          in: path
          description: feature id
          required: true
          schema:
            type: integer
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string

      responses:
        200:
          description: 删除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /sync_product_line:
    post:
      tags:
        - 产品线管理
      summary: 更新产品线
      parameters:
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /members:
    get:
      tags:
        - member成员管理
      summary: 查找符合条件的所有member
      parameters:
        - name: leader
          in: query
          description: leader
          required: false
          schema:
            type: string
        - name: role
          in: query
          description: role
          required: false
          schema:
            type: string
        - name: department_name
          in: query
          description: department name
          required: false
          schema:
            type: string
        - name: product_line_id
          in: query
          description: product line id
          required: false
          schema:
            type: integer
        - name: product_line
          in: query
          description: product line name
          required: false
          schema:
            type: string
        - name: sub_line_id
          in: query
          description: sub line id
          required: false
          schema:
            type: integer
        - name: sub_line
          in: query
          description: sub line name
          required: false
          schema:
            type: string
        - name: feature_id
          in: query
          description: feature id
          required: false
          schema:
            type: integer
        - name: feature
          in: query
          description: feature name
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer

      responses:
        200:
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example: { "total": 2, "items": [{}, {}] }

    post:
      tags:
        - member成员管理
      summary: 新增member
      parameters:
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                leader:
                  type: string
                role:
                  type: array
                product_line:
                  type: array
                feature:
                  type: array

        required: true

      responses:
        200:
          description: 新增成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /member:
    get:
      tags:
        - member成员管理
      summary: 根据条件查找member
      parameters:
        - name: id
          in: query
          description: id
          required: false
          schema:
            type: integer
        - name: email
          in: query
          description: email
          required: false
          schema:
            type: string

      responses:
        200:
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example: {}

    put:
      tags:
        - member成员管理
      summary: 更新或新增某个成员信息
      parameters:
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: "test@shopee.com"
                leader:
                  type: string
                role:
                  type: array
                  items:
                    type: string
                product_line:
                  type: array
                  items:
                    type: integer
                feature:
                  type: array
                  items:
                    type: integer
        required: true

      responses:
        200:
          description: 成员信息更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    delete:
      tags:
        - member成员管理
      summary: 删除某个成员
      parameters:
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                  example: 10
                email:
                  type: string
                  example: "test@shopee.com"
        required: true

      responses:
        200:
          description: 删除成员成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /sync_member:
    post:
      tags:
        - member成员管理
      summary: 更新用户信息
      parameters:
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /projects:
    get:
      tags:
        - 项目管理
      summary: 获取项目列表
      parameters:
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer
        - name: name
          in: query
          description: 项目名字
          required: false
          schema:
            type: string
        - name: status
          in: query
          description: 项目状态
          required: false
          schema:
            type: string
        - name: product_line_id
          in: query
          description: 一级产品线id
          required: false
          schema:
            type: string
        - name: sub_line
          in: query
          description: 二级产品线名
          required: false
          schema:
            type: string
        - name: public_projrct
          in: query
          description: public_projrct
          required: false
          schema:
            type: boolean
      responses:
        200:
          description: 项目列表数据
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            author:
                              type: string
                              example: kobe
                            created_time:
                              type: string
                            updated_time:
                              type: string
                            id:
                              type: integer
                              example: 1
                            name:
                              type: string
                              example: env1
                            description:
                              type: string
                              example: desc something
                            executor:
                              type: string
                            extra:
                              type: object
                            manul_cases_count:
                              type: integer
                            auto_cases_count:
                              type: integer
                            automation_rate:
                              type: string

    post:
      tags:
        - 项目管理
      summary: 新增项目
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                status:
                  type: string
                executor:
                  type: string
                  default: default
                extra:
                  type: object
                manul_cases_count:
                  type: integer
                auto_cases_count:
                  type: integer

        required: true
      responses:
        200:
          description: 新增项目成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /projects/{id}:
    get:
      tags:
        - 项目管理
      summary: 查询指定项目信息
      parameters:
        - name: id
          in: path
          description: 项目id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 模块具体信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      author:
                        type: string
                        example: kobe
                      created_time:
                        type: string
                      updated_time:
                        type: string
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: project1
                      status:
                        type: string
                        example: active
                      description:
                        type: string
                        example: desc something
                      executor:
                        type: string
                        default: dafault
                      extra:
                        type: object
                      manul_cases_count:
                        type: integer
                      auto_cases_count:
                        type: integer

    put:
      tags:
        - 项目管理
      summary: 更新某个项目
      parameters:
        - name: id
          in: path
          description: 项目id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                name:
                  type: string
                description:
                  type: string
                status:
                  type: string
                executor:
                  type: string
                extra:
                  type: object
                manul_cases_count:
                  type: integer
                auto_cases_count:
                  type: integer

        required: true
      responses:
        200:
          description: 项目更改成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    delete:
      tags:
        - 项目管理
      summary: 删除某个项目（逻辑删）
      parameters:
        - name: id
          in: path
          description: 项目id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 删除项目成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /delete_project/{id}:
    delete:
      tags:
        - 项目管理
      summary: 删除某个项目（真删）
      parameters:
        - name: id
          in: path
          description: 项目id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 删除项目成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /projects/update:
    put:
      tags:
        - 项目管理
      summary: 更新项目信息
      parameters:
        - name: id
          in: path
          description: 项目id
          required: false
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe

        required: false
      responses:
        200:
          description: 更新项目信息成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /executors/{id}:
    get:
      tags:
        - 项目管理
      summary: 更新3rd-party, 更新执行器，用例等
      parameters:
        - name: id
          in: path
          description: 项目id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /executorlog/{id}:
    get:
      tags:
        - 项目管理
      summary: 获取导入日志
      parameters:
        - name: id
          in: path
          description: 项目id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: string

  /caseclone/{id}:
    post:
      tags:
        - 用例管理
      summary: clone指定用例
      parameters:
        - name: id
          in: path
          description: 用例id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: clone指定用例成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      id:
                        type: integer

  /suiteclone/{id}:
    post:
      tags:
        - 测试集管理
      summary: clone指定测试集
      parameters:
        - name: id
          in: path
          description: 测试集id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: clone指定测试集成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      id:
                        type: integer

  /planverify:
    post:
      tags:
        - 测试集管理
      summary: 验证plan

      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                plan:
                  type: object

      responses:
        200:
          description: ok
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /casesuites:
    get:
      tags:
        - 测试集管理
      summary: 获取测试集列表
      parameters:
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer
        - name: name
          in: query
          description: API名字
          required: false
          schema:
            type: string
        - name: project_id
          in: query
          description: 项目id
          required: false
          schema:
            type: integer
        - name: author
          in: query
          description: 所有者
          required: false
          schema:
            type: string
        - name: is_manual
          in: query
          description: 是否手工plan
          required: false
          schema:
            type: boolean

      responses:
        200:
          description: 测试集列表数据
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            author:
                              type: string
                              example: kobe
                            created_time:
                              type: string
                            updated_time:
                              type: string
                            id:
                              type: integer
                              example: 1
                            name:
                              type: string
                              example: xxx_api
                            project_id:
                              type: integer
                              example: 1
                            description:
                              type: string
                              example: desc something
                            schedule:
                              $ref: "#/components/schemas/schedule"

    post:
      tags:
        - 测试集管理
      summary: 新增测试集
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                  example: '{
                    "emails": ["xun.gong@shopee.com"],
                    "seatalks":
                    [
                    "https://openapi.seatalk.io/webhook/group/464o8SdhR-aHWMKrN2-gPg"
                    ],
                    "mattermosts":
                    [
                    "https://mattermost.garenanow.com/hooks/by678x9dwpbp3xocedyb5nm1re"
                    ]
                    }'
                project_id:
                  type: integer
                is_manual:
                  type: boolean
                  example: false
                plan:
                  type: object
                noti:
                  type: object
                runtime_config:
                  type: object
                schedule:
                  $ref: "#/components/schemas/schedule"

        required: true
      responses:
        200:
          description: 新增测试集成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
  /casesuites/{id}:
    get:
      tags:
        - 测试集管理
      summary: 查询指定测试集信息
      parameters:
        - name: id
          in: path
          description: 测试集id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 测试集具体信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      author:
                        type: string
                        example: kobe
                      created_time:
                        type: string
                      updated_time:
                        type: string
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: xxx_api
                      is_manual:
                        type: boolean
                        example: false
                      project_id:
                        type: integer
                        example: 1
                      description:
                        type: string
                        example: '{
                          "emails": ["xun.gong@shopee.com"],
                          "seatalks":
                          [
                          "https://openapi.seatalk.io/webhook/group/464o8SdhR-aHWMKrN2-gPg"
                          ],
                          "mattermosts":
                          [
                          "https://mattermost.garenanow.com/hooks/by678x9dwpbp3xocedyb5nm1re"
                          ]
                          }'
                      case_id_list:
                        type: array
                        items:
                          type: integer
                      schedule:
                        $ref: "#/components/schemas/schedule"

    put:
      tags:
        - 测试集管理
      summary: 更新测试集信息
      parameters:
        - name: id
          in: path
          description: 测试集id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                name:
                  type: string
                description:
                  type: string
                  example: '{
                    "emails": ["xun.gong@shopee.com"],
                    "seatalks":
                    [
                    "https://openapi.seatalk.io/webhook/group/464o8SdhR-aHWMKrN2-gPg"
                    ],
                    "mattermosts":
                    [
                    "https://mattermost.garenanow.com/hooks/by678x9dwpbp3xocedyb5nm1re"
                    ]
                    }'
                project_id:
                  type: integer
                case_id_list:
                  type: array
                  items:
                    type: integer
                schedule:
                  $ref: "#/components/schemas/schedule"
        required: true
      responses:
        200:
          description: 测试集更改成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
    delete:
      tags:
        - 测试集管理
      summary: 删除某个测试集
      parameters:
        - name: id
          in: path
          description: 测试集id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 删除测试集成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /casesuitesettop/{id}:
    put:
      tags:
        - 测试集管理
      summary: 置顶某个用例
      parameters:
        - name: id
          in: path
          description: 测试集id
          required: true
          schema:
            type: integer

      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                case_id:
                  type: integer
      responses:
        200:
          description: 置顶用例成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /editcaseexecdep:
    get:
      tags:
        - 测试集管理
      summary: suite case 依赖编辑页面
      parameters:
        - name: suite_id
          in: query
          description: 测试集id
          required: false
          schema:
            type: integer
        - name: case_ids
          in: query
          description: 查询case的输入输出
          required: false
          schema:
            type: array
            items:
              type: integer

      responses:
        200:
          description: case与case输入输出信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    items:
                      type: object

  /crontodate:
    get:
      tags:
        - 测试集管理
      summary: Cron表达式转换为日期列表
      parameters:
        - name: cron
          in: query
          description: Cron(依次为 分钟，小时，日，月，周)
          required: true
          schema:
            type: string
            example: "0 6,10 * * ?"

      responses:
        200:
          description: 日期列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    items:
                      type: string

  /casesuitepage/{id}:
    get:
      tags:
        - 测试集管理
      summary: 查询指定测试集的分页cases
      parameters:
        - name: id
          in: path
          description: 测试集id
          required: true
          schema:
            type: integer
        - name: page
          in: query
          description: 返回第几页数据
          required: true
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 测试用例具体信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      cases:
                        type: array
                        items:
                          type: object

  /cases:
    get:
      tags:
        - 用例管理
      summary: 获取用例列表
      parameters:
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer
        - name: name
          in: query
          description: 用例名字
          required: false
          schema:
            type: string
        - name: project_id
          in: query
          description: 项目id
          required: false
          schema:
            type: integer
        - name: group_id_list
          in: query
          description: 分组ID列表字符串
          required: false
          schema:
            type: string
        - name: category
          in: query
          description: 执行器类型
          required: false
          schema:
            type: string
        - name: priority
          in: query
          description: 用例优先级
          required: false
          schema:
            type: string
        - name: feature_id
          in: query
          description: 某个feature_id下有多少用例
          required: false
          schema:
            type: integer
        - name: type
          in: query
          description: 用例类型
          required: false
          schema:
            type: string
        - name: api
          in: query
          description: api
          required: false
          schema:
            type: string

      responses:
        200:
          description: 用例列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            author:
                              type: string
                              example: kobe
                            created_time:
                              type: string
                            updated_time:
                              type: string
                            id:
                              type: integer
                              example: 1
                            name:
                              type: string
                              example: xxxx
                            category:
                              type: string
                              example: http
                            priority:
                              type: string
                              example: P0
                            content:
                              type: object
                            project_id:
                              type: integer
                              example: 1
                            group_id:
                              type: integer
                              example: 1
                            description:
                              type: string
                              example: desc something
                            extra:
                              type: object
    post:
      tags:
        - 用例管理
      summary: 新增用例
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                name:
                  type: string
                category:
                  type: string
                priority:
                  type: string
                  example: P0
                content:
                  $ref: "#/components/schemas/casecontent"
                description:
                  type: string
                project_id:
                  type: integer
                group_id:
                  type: integer
                extra:
                  type: object
        required: true
      responses:
        200:
          description: 新增用例成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

    delete:
      tags:
        - 用例管理
      summary: 删除用例
      parameters:
        - name: case_id_list
          in: query
          description: 用例ID列表字符串
          required: true
          schema:
            type: string
      responses:
        200:
          description: 删除用例成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /cases/{id}:
    get:
      tags:
        - 用例管理
      summary: 查询指定用例信息
      parameters:
        - name: normal
          in: query
          description: 格式控制，Ture为正常格式
          required: false
          schema:
            type: boolean
        - name: id
          in: path
          description: 用例id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 用例具体信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      author:
                        type: string
                        example: kobe
                      created_time:
                        type: string
                      updated_time:
                        type: string
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: xxxx
                      category:
                        type: string
                        example: 1
                      priority:
                        type: string
                        example: P0
                      content:
                        $ref: "#/components/schemas/casecontent"
                      project_id:
                        type: integer
                        example: 1
                      group_id:
                        type: integer
                        example: 1
                      description:
                        type: string
                        example: desc something
                      extra:
                        type: object
    put:
      tags:
        - 用例管理
      summary: 更新用例信息
      parameters:
        - name: id
          in: path
          description: 用例id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                name:
                  type: string
                category:
                  type: string
                manual_case_id:
                  type: integer
                priority:
                  type: string
                  example: P0
                content:
                  $ref: "#/components/schemas/casecontent"
                description:
                  type: string
                project_id:
                  type: integer
                group_id:
                  type: integer
                extra:
                  type: object

        required: true
      responses:
        200:
          description: 用例更改成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
    delete:
      tags:
        - 用例管理
      summary: 删除某个用例
      parameters:
        - name: id
          in: path
          description: 用例id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 删除用例成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /cases/by_group_id:
    post:
      tags:
        - 用例管理
      summary: 查询对应group下的case
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                group_id_list:
                  type: array
                  example: [1, 2, 3]
                page:
                  type: integer
                  example: 1
                per_page:
                  type: integer
                  example: 10

        required: true

      responses:
        200:
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object

  /thecaseresults:
    get:
      tags:
        - 用例报告管理
      summary: 获取用例报告列表
      parameters:
        - name: suiteresult_id
          in: query
          description: 测试集报告id
          required: true
          schema:
            type: integer
        - name: status
          in: query
          description: 用例状态
          required: false
          schema:
            type: string
        - name: author
          in: query
          description: 作者
          required: false
          schema:
            type: string
        - name: groups
          in: query
          description: root grouo name
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: Number of pages of the current query
          required: true
          schema:
            type: integer
        - name: per_page
          in: query
          description: Number of displays per page
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 用例报告列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object

  /caseresults:
    get:
      tags:
        - 用例报告管理
      summary: 获取用例报告列表
      parameters:
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer
        - name: case_id
          in: query
          description: 用例id
          required: false
          schema:
            type: integer
        - name: case_name
          in: query
          description: 用例名字
          required: false
          schema:
            type: string
        - name: project_id
          in: query
          description: 项目id
          required: false
          schema:
            type: integer
        - name: suiteresult_id
          in: query
          description: 测试集报告id
          required: false
          schema:
            type: integer
        - name: status
          in: query
          description: 用例状态
          required: false
          schema:
            type: string
        - name: organized
          in: query
          description: 首页dashboard分类
          required: false
          schema:
            type: string
        - name: author
          in: query
          description: 作者
          required: false
          schema:
            type: string
        - name: api
          in: query
          description: api
          required: false
          schema:
            type: string

      responses:
        200:
          description: 用例报告列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            author:
                              type: string
                              example: kobe
                            created_time:
                              type: string
                            updated_time:
                              type: string
                            id:
                              type: integer
                              example: 1
                            status:
                              type: string
                              example: running
                            case_name:
                              type: string
                              example: case1
                            case_category:
                              type: string
                              example: http
                            project_name:
                              type: string
                              example: project1
                            env_name:
                              type: string
                              example: env1
                            details:
                              $ref: "#/components/schemas/caseresultdeteil"
                            case_id:
                              type: integer
                              example: 1
                            suiteresult_id:
                              type: integer
                              example: 1
    post:
      tags:
        - 用例报告管理
      summary: 生成测试报告
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                status:
                  type: string
                  example: running
                case_name:
                  type: string
                  example: case1
                case_category:
                  type: string
                  example: http
                project_name:
                  type: string
                  example: project1
                env_name:
                  type: string
                  example: env1
                details:
                  $ref: "#/components/schemas/caseresultdeteil"
                case_id:
                  type: integer
                  example: 1
                suiteresult_id:
                  type: integer
                  example: 1

        required: true
      responses:
        200:
          description: 新增用例成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
  /caseresults/{id}:
    get:
      tags:
        - 用例报告管理
      summary: 查询指定用例报告信息
      parameters:
        - name: id
          in: path
          description: 用例报告id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 用例报告具体信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      author:
                        type: string
                        example: kobe
                      created_time:
                        type: string
                      updated_time:
                        type: string
                      id:
                        type: integer
                        example: 1
                      status:
                        type: string
                        example: running
                      case_name:
                        type: string
                        example: case1
                      case_category:
                        type: string
                        example: http
                      project_name:
                        type: string
                        example: project1
                      env_name:
                        type: string
                        example: env1
                      details:
                        $ref: "#/components/schemas/caseresultdeteil"
                      case_id:
                        type: integer
                        example: 1
                      suiteresult_id:
                        type: integer
                        example: 1
    put:
      tags:
        - 用例报告管理
      summary: 更新用例报告信息
      parameters:
        - name: id
          in: path
          description: 用例报告id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                status:
                  type: string
                  example: running
                case_name:
                  type: string
                  example: case1
                case_category:
                  type: string
                  example: http
                project_name:
                  type: string
                  example: project1
                env_name:
                  type: string
                  example: env1
                details:
                  $ref: "#/components/schemas/caseresultdeteil"
                case_id:
                  type: integer
                  example: 1
                suiteresult_id:
                  type: integer
                  example: 1
                comments:
                  type: string
                  example: the reason why it is failed

        required: true
      responses:
        200:
          description: 用例报告更改成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    delete:
      tags:
        - 用例报告管理
      summary: 删除某个用例
      parameters:
        - name: id
          in: path
          description: 用例报告id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 删除用例报告成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /caseitemresult/{case_result_id}:
    get:
      tags:
        - 用例报告管理
      summary: 查询指定用例报告详细item信息
      parameters:
        - name: case_result_id
          in: path
          description: 用例报告id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 用例报告item具体信息
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    status:
                      type: string
                    name:
                      type: string
                    value:
                      type: string
                    comment:
                      type: string

  /casereasons:
    get:
      tags:
        - 用例报告管理
      summary: 获取case执行失败原因列表
      responses:
        200:
          description: case执行失败原因
          content:
            application/json:
              schema:
                type: object
                properties:
                  ERROR:
                    type: object
                    properties:
                      case_error:
                        type: string
                        example: case_error
                      system_error:
                        type: string
                        example: system_error

  /casenamesuitename:
    get:
      tags:
        - 用例报告管理
      summary: 获取casename和suitename集
      parameters:
        - name: project_id
          in: query
          description: 项目id
          required: false
          schema:
            type: integer
      responses:
        200:
          description: casename和suitename的列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  case_names:
                    type: array
                    items:
                      type: string
                  suite_names:
                    type: array
                    items:
                      type: string

  /casereason:
    put:
      tags:
        - 用例报告管理
      summary: 修改case执行失败的原因
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: object
                  example: { "script_issue": [1, 2, 3] }

      responses:
        200:
          description: 修改成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /suiteresults:
    get:
      tags:
        - 测试集报告管理
      summary: 获取测试集报告列表
      parameters:
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer
        - name: casesuite_id
          in: query
          description: 测试集id
          required: false
          schema:
            type: integer
        - name: casesuite_name
          in: query
          description: 测试集名字
          required: false
          schema:
            type: string
        - name: project_id
          in: query
          description: 项目id
          required: false
          schema:
            type: integer
        - name: status
          in: query
          description: 测试集状态
          required: false
          schema:
            type: string
        - name: reverse
          in: query
          description: 结果是否取反
          required: false
          schema:
            type: boolean
        - name: author
          in: query
          description: 作者
          required: false
          schema:
            type: string
        - name: is_manual
          in: query
          description: is manual plan
          required: false
          schema:
            type: boolean
        - name: pfb
          in: query
          description: pfb
          required: false
          schema:
            type: string

      responses:
        200:
          description: 测试集报告列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            author:
                              type: string
                              example: kobe
                            created_time:
                              type: string
                            updated_time:
                              type: string
                            id:
                              type: integer
                              example: 1
                            status:
                              type: string
                              example: running
                            suite_name:
                              type: string
                              example: case1
                            project_name:
                              type: string
                              example: project1
                            env_name:
                              type: string
                              example: env1
                            total:
                              type: integer
                              example: 3
                            pass_num:
                              type: integer
                              example: 1
                            fail_num:
                              type: integer
                              example: 1
                            pending_num:
                              type: integer
                            running_num:
                              type: integer
                            canceled_num:
                              type: integer
                            success_rate:
                              type: number
                            error_num:
                              type: integer
                              example: 1
                            casesuite_id:
                              type: integer
                              example: 1
                            log:
                              type: string
                            html_file:
                              type: string

    post:
      tags:
        - 测试集报告管理
      summary: 生成测试集报告
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                status:
                  type: string
                  example: running
                casesuite_name:
                  type: string
                  example: case1
                project_name:
                  type: string
                  example: project1
                env_name:
                  type: string
                  example: env1
                total:
                  type: integer
                  example: 3
                pass_num:
                  type: integer
                  example: 1
                fail_num:
                  type: integer
                  example: 1
                error_num:
                  type: integer
                  example: 1
                pending_num:
                  type: integer
                running_num:
                  type: integer
                canceled_num:
                  type: integer
                success_rate:
                  type: number
                  example: 0
                casesuite_id:
                  type: integer
                  example: 1
                log:
                  type: string
                html_file:
                  type: string

        required: true
      responses:
        200:
          description: 新增测试集成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
  /suiteresults/{id}:
    get:
      tags:
        - 测试集报告管理
      summary: 查询指定测试集报告信息
      parameters:
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer
        - name: id
          in: path
          description: 测试集报告id
          required: true
          schema:
            type: integer
        - name: author
          in: query
          description: author
          required: false
          schema:
            type: string
        - name: case_name
          in: query
          description: case_name
          required: false
          schema:
            type: string
        - name: reason
          in: query
          description: reason
          required: false
          schema:
            type: string

      responses:
        200:
          description: 测试集报告具体信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      author:
                        type: string
                        example: kobe
                      created_time:
                        type: string
                      updated_time:
                        type: string
                      id:
                        type: integer
                        example: 1
                      status:
                        type: string
                        example: running
                      casesuite_name:
                        type: string
                        example: case1
                      project_name:
                        type: string
                        example: project1
                      env_name:
                        type: string
                        example: env1
                      total:
                        type: integer
                        example: 3
                      pass_num:
                        type: integer
                        example: 1
                      fail_num:
                        type: integer
                        example: 1
                      pending_num:
                        type: integer
                      running_num:
                        type: integer
                      canceled_num:
                        type: integer
                      success_rate:
                        type: number
                      error_num:
                        type: integer
                        example: 1
                      casesuite_id:
                        type: integer
                        example: 1
                      log:
                        type: string
                      html_file:
                        type: string
                      caseresults:
                        type: array
                        items:
                          type: object

    put:
      tags:
        - 测试集报告管理
      summary: 更新测试集报告信息
      parameters:
        - name: id
          in: path
          description: 测试集报告id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                status:
                  type: string
                  example: running
                case_name:
                  type: string
                  example: case1
                case_category:
                  type: string
                  example: http
                project_name:
                  type: string
                  example: project1
                env_name:
                  type: string
                  example: env1
                total:
                  type: integer
                  example: 3
                pass_num:
                  type: integer
                  example: 1
                fail_num:
                  type: integer
                  example: 1
                error_num:
                  type: integer
                  example: 1
                pending_num:
                  type: integer
                running_num:
                  type: integer
                canceled_num:
                  type: integer
                casesuite_id:
                  type: integer
                  example: 1
                log:
                  type: string
                html_file:
                  type: string

        required: true
      responses:
        200:
          description: 用例报告更改成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    delete:
      tags:
        - 测试集报告管理
      summary: 删除某个测试集
      parameters:
        - name: id
          in: path
          description: 测试集报告id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 删除测试集报告成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /appsuiteresults/{id}:
    get:
      tags:
        - 测试集报告管理
      summary: 获取APP测试集报告信息
      parameters:
        - name: page
          in: query
          description: DeviceTab返回第几页数据
          required: true
          schema:
            type: integer
        - name: per_page
          in: query
          description: DeviceTab每页包含多少条数据
          required: true
          schema:
            type: integer
        - name: id
          in: path
          description: 测试集报告id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: APP测试集报告详细信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      suite_result_info:
                        type: object
                        properties:
                          app_name:
                            type: string
                            example: SeaBankID
                          app_size:
                            type: string
                            example: 66.0MB
                          app_version:
                            type: string
                            example: 2.22.0
                          suite_result_id:
                            type: integer
                            example: 1
                          user:
                            type: string
                            example: kobe
                          status:
                            type: string
                            example: pass
                          start_time:
                            type: string
                            example: "2022-06-16 10:00:00"
                          end_time:
                            type: string
                            example: "2022-06-16 10:05:00"
                          device_quantity:
                            type: integer
                            example: 10
                          passed_num:
                            type: integer
                            example: 8
                          failed_num:
                            type: integer
                            example: 2
                          not_tested_num:
                            type: integer
                            example: 0
                          failed_device_details:
                            type: object
                            properties:
                              brands:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    name:
                                      type: string
                                      example: Huawei
                                    number:
                                      type: integer
                                      example: 2
                                    value:
                                      type: string
                                      example: 50%
                              rams:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    name:
                                      type: string
                                      example: 7146
                                    number:
                                      type: integer
                                      example: 2
                                    value:
                                      type: string
                                      example: 90%
                              os_version:
                                type: array
                                items:
                                  type: object
                                  properties:
                                    name:
                                      type: string
                                      example: 11
                                    number:
                                      type: integer
                                      example: 1
                                    value:
                                      type: string
                                      example: 20%

                      device_tab:
                        type: object
                        properties:
                          devices_info_list:
                            type: array
                            items:
                              type: object
                              properties:
                                device_id:
                                  type: string
                                  example: 10000
                                device_status:
                                  type: string
                                  example: Complete
                                device_result:
                                  type: string
                                  example: Passed
                                brand:
                                  type: string
                                  example: Huawei
                                name:
                                  type: string
                                  example: Huawei phone
                                model:
                                  type: string
                                  example: Mate 50
                                os:
                                  type: string
                                  example: Android
                                os_version:
                                  type: string
                                  example: 10
                                screen:
                                  type: string
                                  example: 1080x2340
                                failed_total_cases:
                                  type: string
                                  example: 2/10

  /appsuiteresults/{suite_result_id}/{device_id}:
    get:
      tags:
        - 测试集报告管理
      summary: 获取APP测试集报告设备详细信息
      parameters:
        - name: page
          in: query
          description: 设备的CaseResult返回第几页数据
          required: true
          schema:
            type: integer
        - name: per_page
          in: query
          description: 设备的CaseResult每页包含多少条数据
          required: true
          schema:
            type: integer
        - name: suite_result_id
          in: path
          description: 测试集报告id
          required: true
          schema:
            type: integer
        - name: device_id
          in: path
          description: 设备id
          required: true
          schema:
            type: string

      responses:
        200:
          description: APP测试报告设备详细信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      app_detail:
                        type: object
                        properties:
                          file_name:
                            type: string
                            example: SPSPDT_v1.4.7_cloud.apk
                          version:
                            type: string
                            example: 1.4.7
                          app_size:
                            type: string
                            example: 32.7M
                          min_sdk_level:
                            type: string
                            example: 16
                          target_sdk_level:
                            type: string
                            example: 30
                          download_address:
                            type: string
                            example: com.shopee.dfwjy2
                      device_detail:
                        type: object
                        properties:
                          name:
                            type: string
                            example: Huawei Phone
                          id:
                            type: string
                            example: 10000
                          model:
                            type: string
                            example: Huawei Mate50
                          os_version:
                            type: string
                            example: 11
                          cpu:
                            type: string
                            example: Qualcomm845
                          gpu:
                            type: string
                            example: Qualcomm,Adreno(TM)630
                          ram:
                            type: string
                            example: 7488MB
                          rom:
                            type: string
                            example: 111GB
                          api_level:
                            type: string
                            example: 29
                          rooted:
                            type: boolean
                            example: false
                          screen:
                            type: string
                            example: 1080x2340
                      case_result_list:
                        type: array
                        items:
                          type: object
                          properties:
                            case_result_id:
                              type: integer
                              example: 100
                            case_name:
                              type: string
                              example: test_case
                            case_result:
                              type: string
                              example: Passed
                            start_time:
                              type: string
                              example: "2022-06-16 10:00:00"
                            end_time:
                              type: string
                              example: "2022-06-16 10:01:00"
                            duration:
                              type: string
                              example: 60.0s

  /groups:
    get:
      tags:
        - 用例管理
      summary: 获取用例组列表
      parameters:
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer
        - name: name
          in: query
          description: 用例组名字
          required: false
          schema:
            type: string
        - name: project_id
          in: query
          description: 项目id
          required: false
          schema:
            type: integer
        - name: mum_id
          in: query
          description: 母group_id
          required: false
          schema:
            type: integer
        - name: organized
          in: query
          description: 数据返回格式
          required: false
          schema:
            type: integer

      responses:
        200:
          description: 用例组列表数据
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            author:
                              type: string
                              example: kobe
                            created_time:
                              type: string
                            updated_time:
                              type: string
                            id:
                              type: integer
                              example: 1
                            name:
                              type: string
                              example: xxx_api
                            project_id:
                              type: integer
                              example: 1
                            description:
                              type: string
                              example: desc something
                            mum_id:
                              type: integer
                              example: 1
    post:
      tags:
        - 用例管理
      summary: 新增用例组
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                name:
                  type: string
                description:
                  type: string
                project_id:
                  type: integer
                mum_id:
                  type: integer
        required: true
      responses:
        200:
          description: 新增用例组成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
  /groups/{id}:
    get:
      tags:
        - 用例管理
      summary: 查询指定用例组信息
      parameters:
        - name: id
          in: path
          description: 用例组id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 用例组具体信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      author:
                        type: string
                        example: kobe
                      created_time:
                        type: string
                      updated_time:
                        type: string
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                      project_id:
                        type: integer
                      description:
                        type: string
                        example: desc something
                      mum_id:
                        type: integer
    put:
      tags:
        - 用例管理
      summary: 更新用例组信息
      parameters:
        - name: id
          in: path
          description: 用例组id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                name:
                  type: string
                description:
                  type: string
                project_id:
                  type: integer
                mum_id:
                  type: integer

        required: true
      responses:
        200:
          description: 用例组更改成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
    delete:
      tags:
        - 用例管理
      summary: 删除某个用例组
      parameters:
        - name: id
          in: path
          description: 用例组id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 删除用例组成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /cases/many:
    post:
      tags:
        - 用例管理
      summary: 用于第三方执行器批量录入用例，
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  primary_key:
                    type: string
                    example: "anyitem or extra.xxxx"
                  author:
                    type: string
                  name:
                    type: string
                  category:
                    type: string
                  priority:
                    type: string
                  description:
                    type: string
                  project_id:
                    type: integer
                  group_id:
                    type: integer
                  manual_case_id:
                    type: integer
                  extra:
                    type: object
        required: true
      responses:
        200:
          description: 同步成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /casetests/{id}:
    get:
      tags:
        - 用例管理
      summary: 用例执行
      parameters:
        - name: id
          in: path
          description: 用例id
          required: true
          schema:
            type: integer
        - name: env_id
          in: query
          description: 环境id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

    post:
      tags:
        - 用例管理
      summary: 用例执行
      parameters:
        - name: id
          in: path
          description: 用例id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                env_id:
                  type: integer
                code_coverage:
                  type: boolean
                  default: false
                runtime_args:
                  type: object
                  properties:
                    official_mobile:
                      type: object
                      properties:
                        android_main_device_id:
                          type: object
                          properties:
                            devices:
                              type: array
                              items:
                                type: object
                                example:
                                  {
                                    "value": "10.12.188.14:6001",
                                    "label": "Pixel <-> Pixel <-> 10",
                                    "notes": "Android主测设备",
                                    "name": "android_main_device_id",
                                    "type": "selectbox",
                                    "group": "Android",
                                  }
                            installApp:
                              type: object
                              example:
                                {
                                  "platform": "Android",
                                  "app_name": "Shopee",
                                  "region": "SG",
                                  "version": "2.77.03@hms(521)",
                                }
                        android_sub_device_id:
                          type: object
                          properties:
                            devices:
                              type: array
                              items:
                                type: object
                                example:
                                  {
                                    "value": "10.12.188.14:6001",
                                    "label": "Pixel <-> Pixel <-> 10",
                                    "notes": "Android主测设备",
                                    "name": "android_main_device_id",
                                    "type": "selectbox",
                                    "group": "Android",
                                  }
                            installApp:
                              type: object
                              example:
                                {
                                  "platform": "Android",
                                  "app_name": "Shopee",
                                  "region": "SG",
                                  "version": "2.77.03@hms(521)",
                                }
                        ios_main_device_id:
                          type: object
                          properties:
                            devices:
                              type: array
                              items:
                                type: object
                                example:
                                  {
                                    "value": "10.12.188.14:6001",
                                    "label": "Pixel <-> Pixel <-> 10",
                                    "notes": "Android主测设备",
                                    "name": "android_main_device_id",
                                    "type": "selectbox",
                                    "group": "Android",
                                  }
                            installApp:
                              type: object
                              example:
                                {
                                  "platform": "Android",
                                  "app_name": "Shopee",
                                  "region": "SG",
                                  "version": "2.77.03@hms(521)",
                                }
                        ios_sub_device_id:
                          type: object
                          properties:
                            devices:
                              type: array
                              items:
                                type: object
                                example:
                                  {
                                    "value": "10.12.188.14:6001",
                                    "label": "Pixel <-> Pixel <-> 10",
                                    "notes": "Android主测设备",
                                    "name": "android_main_device_id",
                                    "type": "selectbox",
                                    "group": "Android",
                                  }
                            installApp:
                              type: object
                              example:
                                {
                                  "platform": "Android",
                                  "app_name": "Shopee",
                                  "region": "SG",
                                  "version": "2.77.03@hms(521)",
                                }
                    official_ui:
                      type: array
                      items:
                        type: object
        required: true
      responses:
        200:
          description: 用例执行
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    delete:
      tags:
        - 用例管理
      summary: 取消执行
      parameters:
        - name: id
          in: path
          description: 用例报告id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 取消成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /casetests:
    post:
      tags:
        - 用例管理
      summary: 用例批量执行

      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                env_name:
                  type: string
                code_coverage:
                  type: boolean
                  default: false
                runtime_args:
                  type: object
                  properties:
                    official_mobile:
                      type: object
                      properties:
                        android_main_device_id:
                          type: object
                          properties:
                            devices:
                              type: array
                              items:
                                type: object
                                example:
                                  {
                                    "value": "10.12.188.14:6001",
                                    "label": "Pixel <-> Pixel <-> 10",
                                    "notes": "Android主测设备",
                                    "name": "android_main_device_id",
                                    "type": "selectbox",
                                    "group": "Android",
                                  }
                            installApp:
                              type: object
                              example:
                                {
                                  "platform": "Android",
                                  "app_name": "Shopee",
                                  "region": "SG",
                                  "version": "2.77.03@hms(521)",
                                }
                        android_sub_device_id:
                          type: object
                          properties:
                            devices:
                              type: array
                              items:
                                type: object
                                example:
                                  {
                                    "value": "10.12.188.14:6001",
                                    "label": "Pixel <-> Pixel <-> 10",
                                    "notes": "Android主测设备",
                                    "name": "android_main_device_id",
                                    "type": "selectbox",
                                    "group": "Android",
                                  }
                            installApp:
                              type: object
                              example:
                                {
                                  "platform": "Android",
                                  "app_name": "Shopee",
                                  "region": "SG",
                                  "version": "2.77.03@hms(521)",
                                }
                        ios_main_device_id:
                          type: object
                          properties:
                            devices:
                              type: array
                              items:
                                type: object
                                example:
                                  {
                                    "value": "10.12.188.14:6001",
                                    "label": "Pixel <-> Pixel <-> 10",
                                    "notes": "Android主测设备",
                                    "name": "android_main_device_id",
                                    "type": "selectbox",
                                    "group": "Android",
                                  }
                            installApp:
                              type: object
                              example:
                                {
                                  "platform": "Android",
                                  "app_name": "Shopee",
                                  "region": "SG",
                                  "version": "2.77.03@hms(521)",
                                }
                        ios_sub_device_id:
                          type: object
                          properties:
                            devices:
                              type: array
                              items:
                                type: object
                                example:
                                  {
                                    "value": "10.12.188.14:6001",
                                    "label": "Pixel <-> Pixel <-> 10",
                                    "notes": "Android主测设备",
                                    "name": "android_main_device_id",
                                    "type": "selectbox",
                                    "group": "Android",
                                  }
                            installApp:
                              type: object
                              example:
                                {
                                  "platform": "Android",
                                  "app_name": "Shopee",
                                  "region": "SG",
                                  "version": "2.77.03@hms(521)",
                                }
                    official_ui:
                      type: array
                      items:
                        type: object
                cases:
                  type: array
                  items:
                    type: integer

        required: true
      responses:
        200:
          description: hehe
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /casererun/{id}:
    post:
      tags:
        - 用例管理
      summary: 用例重新执行
      parameters:
        - name: id
          in: path
          description: 用例报告id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 测试用例重新执行
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /suitetests/{id}:
    get:
      tags:
        - 测试集管理
      summary: 用例集执行
      parameters:
        - name: id
          in: path
          description: suite id
          required: true
          schema:
            type: integer
        - name: env_name
          in: query
          description: env name
          required: true
          schema:
            type: string
        - name: user
          in: query
          description: user name
          required: false
          schema:
            type: string
      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

    post:
      tags:
        - 测试集管理
      summary: 测试集执行
      parameters:
        - name: id
          in: path
          description: 测试集id
          required: true
          schema:
            type: integer
        - name: email
          in: header
          description: 个人企业邮箱地址
          example: xun.gong@shopee.com
          required: true
          schema:
            type: string
        - name: token
          in: header
          description: token
          example: "abc"
          required: true
          schema:
            type: string

      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                use_plan_config:
                  type: boolean
                  default: false
                  description: set to true if you want to run with plan config
                apis:
                  type: object
                  example:
                    { "env": { "name": "test-env" }, "routing": { "pfb": "" } }
                common:
                  type: object
                  example:
                    {
                      "enable_proxy": false,
                      "debug_mode": false,
                      "update": false,
                      "serial": false,
                    }
                code_coverage:
                  type: object
                  properties:
                    status:
                      type: boolean
                      example: true
                    clear:
                      type: boolean
                      example: true
                    args:
                      type: object
                      example: { "config": [] }
                setup:
                  type: object
                  properties:
                    auto_deploy:
                      type: object
                      example:
                        {
                          "feature_branch": "",
                          "git_url": "",
                          "git_token_name": "",
                          "git_token": "",
                          "deploy_trigger": "",
                          "independent_env_branch": "",
                        }
                official_mobile:
                  type: object
                  properties:
                    android_main_device_id:
                      type: object
                      properties:
                        devices:
                          type: array
                          items:
                            type: object
                            example:
                              {
                                "value": "10.12.188.14:6001",
                                "label": "Pixel <-> Pixel <-> 10",
                                "notes": "Android主测设备",
                                "name": "android_main_device_id",
                                "type": "selectbox",
                                "group": "Android",
                              }
                        installApp:
                          type: object
                          example:
                            {
                              "platform": "Android",
                              "app_name": "Shopee",
                              "region": "SG",
                              "version": "2.77.03@hms(521)",
                            }
                    android_sub_device_id:
                      type: object
                      properties:
                        devices:
                          type: array
                          items:
                            type: object
                            example:
                              {
                                "value": "10.12.188.14:6001",
                                "label": "Pixel <-> Pixel <-> 10",
                                "notes": "Android主测设备",
                                "name": "android_main_device_id",
                                "type": "selectbox",
                                "group": "Android",
                              }
                        installApp:
                          type: object
                          example:
                            {
                              "platform": "Android",
                              "app_name": "Shopee",
                              "region": "SG",
                              "version": "2.77.03@hms(521)",
                            }
                    ios_main_device_id:
                      type: object
                      properties:
                        devices:
                          type: array
                          items:
                            type: object
                            example:
                              {
                                "value": "10.12.188.14:6001",
                                "label": "Pixel <-> Pixel <-> 10",
                                "notes": "Android主测设备",
                                "name": "android_main_device_id",
                                "type": "selectbox",
                                "group": "Android",
                              }
                        installApp:
                          type: object
                          example:
                            {
                              "platform": "Android",
                              "app_name": "Shopee",
                              "region": "SG",
                              "version": "2.77.03@hms(521)",
                            }
                    ios_sub_device_id:
                      type: object
                      properties:
                        devices:
                          type: array
                          items:
                            type: object
                            example:
                              {
                                "value": "10.12.188.14:6001",
                                "label": "Pixel <-> Pixel <-> 10",
                                "notes": "Android主测设备",
                                "name": "android_main_device_id",
                                "type": "selectbox",
                                "group": "Android",
                              }
                        installApp:
                          type: object
                          example:
                            {
                              "platform": "Android",
                              "app_name": "Shopee",
                              "region": "SG",
                              "version": "2.77.03@hms(521)",
                            }
                official_web:
                  type: object
                  example: {}
        required: true

      responses:
        200:
          description: 测试集执行
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

    delete:
      tags:
        - 测试集管理
      summary: 取消执行
      parameters:
        - name: id
          in: path
          description: 用例集报告id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 取消成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /suite_run_for_webhook/{id}:
    post:
      tags:
        - openapi
      summary: 测试集执行
      parameters:
        - name: id
          in: path
          description: 测试集id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 测试集执行
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /suite_run_for_webhook:
    post:
      tags:
        - openapi
      summary: 测试集执行

      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                project:
                  type: object
                exec_strategy:
                  type: object
                exec_args:
                  type: object
                suite:
                  type: object

      responses:
        200:
          description: 测试集执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
        400:
          description: 测试集执行失败
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "you call the api too many times, take a break~"

  /suitererun/{id}:
    post:
      tags:
        - 测试集管理
      summary: 用例集重新执行
      parameters:
        - name: id
          in: path
          description: 测试集报告id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 测试集重新执行
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /suiteretry/{id}:
    post:
      tags:
        - 测试集管理
      summary: 用例集部分case重新执行（会覆盖原来的结果）
      parameters:
        - name: id
          in: path
          description: 测试集报告id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                retry_cases:
                  type: array
                  example: [1, 2, 3]
        required: true
      responses:
        200:
          description: 测试集重新执行
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /params:
    get:
      tags:
        - worker
      summary: 获取executor params

      responses:
        200:
          description: 执行成功返回worker params列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /workers:
    get:
      tags:
        - worker
      summary: 获取worker信息

      responses:
        200:
          description: 执行成功返回workes列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /instances:
    get:
      tags:
        - goc
      summary: 获取已经注册到 goc server 的 services 列表

      responses:
        200:
          description: 执行成功返回services列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      file:
                        type: array
                        example: []

  /config/{suite_id}:
    get:
      tags:
        - goc
      summary: 获取对应suiteplan的最近一次覆盖率配置
      parameters:
        - name: suite_id
          in: path
          description: 测试集的 id
          required: True
          schema:
            type: integer

      responses:
        200:
          description: ""
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      status:
                        type: boolean
                        example: true
                      clear:
                        type: boolean
                        example: true
                      args:
                        type: object
                        properties:
                          routing:
                            type: object
                            properties:
                              pfb:
                                type: string
                                example: "QA"
                          config:
                            type: array
                            example:
                              [
                                {
                                  "instances":
                                    {
                                      "*": {},
                                      "container_A":
                                        {
                                          "filter":
                                            {
                                              "include":
                                                ["/spex/", ".gen.go", ".pb.go"],
                                              "exclude": ["other_service.go"],
                                            },
                                          "smc_flag": {},
                                        },
                                      "container_B": {},
                                    },
                                },
                                {
                                  "instances": { "container_C": {} },
                                  "delta": { "base": "master" },
                                },
                              ]

  /platforms:
    get:
      tags:
        - others
      summary: 获取platforms
      responses:
        200:
          description: platforms列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    items:
                      type: string

  /regions:
    get:
      tags:
        - others
      summary: 获取regions
      responses:
        200:
          description: regions列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    items:
                      type: string

  /apptypes:
    get:
      tags:
        - others
      summary: 获取apptypes

      responses:
        200:
          description: apptypes列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    items:
                      type: string

  /appinfos:
    get:
      tags:
        - others
      summary: 获取appinfos

      responses:
        200:
          description: apptypes
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    items:
                      type: string
                      properties:
                        platform:
                          type: array
                          items:
                            type: string
                        apptype:
                          type: array
                          items:
                            type: string
                        region:
                          type: array
                          items:
                            type: string

  /appversions:
    get:
      tags:
        - others
      summary: 获取appversions
      parameters:
        - name: platform
          in: query
          description: platform类型
          required: true
          schema:
            type: string
        - name: apptype
          in: query
          description: app类型
          required: true
          schema:
            type: string
        - name: region
          in: query
          description: region类型
          required: true
          schema:
            type: string
      responses:
        200:
          description: appversions
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    items:
                      type: string

  /files/{id}:
    get:
      tags:
        - others
      summary: 下载文件
      parameters:
        - name: id
          in: path
          description: 项目id
          required: true
          schema:
            type: integer
        - name: file
          in: query
          description: 文件名字
          required: true
          schema:
            type: string

      responses:
        200:
          description: 文件内容
          content:
            multipart/form-data:
              schema:
                type: object
                properties:
                  file:
                    type: string
                    format: binary

    post:
      tags:
        - others
      summary: 上传文件
      parameters:
        - name: id
          in: path
          description: 项目id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary

      responses:
        200:
          description: 文件上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      filename:
                        type: string

  /pics:
    post:
      tags:
        - others
      summary: 上传文件
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary

      responses:
        200:
          description: 上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      filename:
                        type: string

  /attachments/{id}:
    get:
      tags:
        - others
      summary: 下载文件
      parameters:
        - name: id
          in: path
          description: caseresult id
          required: true
          schema:
            type: integer
        - name: filepath
          in: query
          description: 文件名字
          required: false
          schema:
            type: string

      responses:
        200:
          description: 文件内容
          content:
            multipart/form-data:
              schema:
                type: object

  /casefiles/{id}:
    post:
      tags:
        - others
      summary: 上传测试用例数据文件
      parameters:
        - name: id
          in: path
          description: 用例id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary

      responses:
        200:
          description: 文件上传成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      filename:
                        type: string
                      filepath:
                        type: string
                      params:
                        type: string

  /pages:
    get:
      tags:
        - others
      summary: 获取page列表
      parameters:
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer
        - name: name
          in: query
          description: Page名字
          required: false
          schema:
            type: string
        - name: project_id
          in: query
          description: 项目id
          required: false
          schema:
            type: integer
        - name: mum_id
          in: query
          description: 母group_id
          required: false
          schema:
            type: integer
        - name: organized
          in: query
          description: 数据返回格式
          required: false
          schema:
            type: integer

      responses:
        200:
          description: Page列表数据
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            author:
                              type: string
                              example: kobe
                            created_time:
                              type: string
                            updated_time:
                              type: string
                            id:
                              type: integer
                              example: 1
                            name:
                              type: string
                            project_id:
                              type: integer
                              example: 1
                            description:
                              type: string
                              example: desc something
                            mum_id:
                              type: integer
                              example: 1
    post:
      tags:
        - others
      summary: 新增Page
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                name:
                  type: string
                description:
                  type: string
                project_id:
                  type: integer
                mum_id:
                  type: integer
        required: true
      responses:
        200:
          description: 新增Page成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
  /pages/{id}:
    get:
      tags:
        - others
      summary: 查询指定Page信息
      parameters:
        - name: id
          in: path
          description: Page id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Page具体信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      author:
                        type: string
                        example: kobe
                      created_time:
                        type: string
                      updated_time:
                        type: string
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                      project_id:
                        type: integer
                      description:
                        type: string
                        example: desc something
                      mum_id:
                        type: integer
    put:
      tags:
        - others
      summary: 更新Page信息
      parameters:
        - name: id
          in: path
          description: Page id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                name:
                  type: string
                description:
                  type: string
                project_id:
                  type: integer
                mum_id:
                  type: integer

        required: true
      responses:
        200:
          description: Page更改成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
    delete:
      tags:
        - others
      summary: 删除某个Page
      parameters:
        - name: id
          in: path
          description: Page id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 删除Page成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /elements:
    get:
      tags:
        - others
      summary: 获取element列表
      parameters:
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer
        - name: alias
          in: query
          description: alias
          required: false
          schema:
            type: string
        - name: project_id
          in: query
          description: 项目id
          required: false
          schema:
            type: integer
        - name: page_id
          in: query
          description: page id
          required: false
          schema:
            type: integer
        - name: page_id_list
          in: query
          description: 页面ID列表字符串
          required: false
          schema:
            type: string
        - name: memo
          in: query
          description: memo
          required: false
          schema:
            type: string

      responses:
        200:
          description: element列表数据
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            author:
                              type: string
                              example: kobe
                            created_time:
                              type: string
                            updated_time:
                              type: string
                            id:
                              type: integer
                              example: 1
                            alias:
                              type: string
                            memo:
                              type: string
                            locator:
                              type: object
                            project_id:
                              type: integer
                              example: 1
                            page_id:
                              type: integer
                              example: 1
    post:
      tags:
        - others
      summary: 新增element
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                alias:
                  type: string
                memo:
                  type: string
                locator:
                  type: object
                  properties:
                    xpath:
                      type: string
                    id:
                      type: string
                    css_selector:
                      type: string
                    class_name:
                      type: string
                project_id:
                  type: integer
                page_id:
                  type: integer
        required: true
      responses:
        200:
          description: 新增element成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
  /elements/{id}:
    get:
      tags:
        - others
      summary: 查询指定element信息
      parameters:
        - name: id
          in: path
          description: element id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: element具体信息
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      author:
                        type: string
                        example: kobe
                      created_time:
                        type: string
                      updated_time:
                        type: string
                      id:
                        type: integer
                        example: 1
                      alias:
                        type: string
                      memo:
                        type: string
                      locator:
                        type: object
                      project_id:
                        type: integer
                        example: 1
                      page_id:
                        type: integer
                        example: 1

    put:
      tags:
        - others
      summary: 更新element信息
      parameters:
        - name: id
          in: path
          description: element id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  example: kobe
                alias:
                  type: string
                memo:
                  type: string
                locator:
                  type: object
                project_id:
                  type: integer
                page_id:
                  type: integer

        required: true
      responses:
        200:
          description: element信息更改成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
    delete:
      tags:
        - others
      summary: 删除某个element
      parameters:
        - name: id
          in: path
          description: element id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 删除element成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /filelist/{id}:
    get:
      tags:
        - others
      summary: 获取文件列表
      parameters:
        - name: id
          in: path
          description: 项目id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 文件列表
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 105
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            abspath:
                              type: string
                            dir:
                              type: boolean
                            name:
                              type: string

  /logsclear/{month}:
    get:
      tags:
        - others
      summary: 清理指定月份之前产生的日志文件
      parameters:
        - name: month
          in: path
          description: 清理几个月之前的日志文件
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /spexmenu/{group_id}:
    get:
      tags:
        - Spex管理
      summary: 查询Spex资源目录
      parameters:
        - name: group_id
          in: path
          description: 查询对应group_id的spex资源
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example:
                      [
                        {
                          "group_id": 1,
                          "name": "",
                          "space_id": 123,
                          "type": "group",
                        },
                        {
                          "service_id": 1,
                          "name": "",
                          "space_id": 234,
                          "type": "service",
                        },
                      ]

  /spexgroupinfo/{group_id}:
    get:
      tags:
        - Spex管理
      summary: 查询Spex group 的详细信息
      parameters:
        - name: group_id
          in: path
          description: 查询对应group_id的spex资源
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example:
                      [
                        {
                          "id": 1,
                          "name": "",
                          "create_time": "2022-02-02",
                          "update_time": "2022-02-02",
                          "type": "group",
                        },
                        {
                          "id": 1,
                          "name": "",
                          "create_time": "2022-02-02",
                          "update_time": "2022-02-02",
                          "error_code_range": { "start": 10000, "end": 20000 },
                          "type": "service",
                        },
                      ]

  /spextopic/{service_id}:
    get:
      tags:
        - Spex管理
      summary: 查询 Spex service 下所有的 topic
      parameters:
        - name: service_id
          in: path
          description: service_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      topic:
                        type: array
                        example: ["topic_1", "topic_2"]

  /spexapi/{service_id}:
    get:
      tags:
        - Spex管理
      summary: 查询 Spex service 下对应topic的 API
      parameters:
        - name: service_id
          in: path
          description: service_id
          required: true
          schema:
            type: integer
        - name: topic
          in: query
          description: topic
          required: true
          schema:
            type: string
        - name: name
          in: query
          description: name
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 2
                      items:
                        type: array
                        example:
                          [
                            { "id": 1, "name": "test1" },
                            { "id": 2, "name": "test2" },
                          ]

  /spexapilist:
    get:
      tags:
        - Spex管理
      summary: 查询 Spex service 下对应topic的所有 API
      parameters:
        - name: service_name
          in: query
          description: service name
          required: true
          schema:
            type: string
        - name: topic
          in: query
          description: topic
          required: true
          schema:
            type: string

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: ["api1", "api2"]

  /spexapi/{planresult_id}:
    put:
      tags:
        - Spex管理
      summary: 更新 spex api 的 health degree
      parameters:
        - name: planresult_id
          in: path
          description: planresult_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                health_degree:
                  type: number
                  example: 0
        required: true
      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /spexapisv2:
    get:
      tags:
        - Spex管理
      summary: 查询匹配name的api
      parameters:
        - name: name
          in: query
          description: api name
          required: true
          schema:
            type: string
        - name: topic
          in: query
          description: topic name
          required: false
          schema:
            type: string
        - name: service
          in: query
          description: service name
          required: false
          schema:
            type: string
        - name: with_default
          in: query
          description: Whether the field needs to be replaced with empty value of the corresponding type
          required: false
          schema:
            type: boolean

      responses:
        200:
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 2
                      items:
                        type: array
                        example:
                          [
                            {
                              "id": 1,
                              "name": "test1",
                              "topic": "topic1",
                              "service": "service1",
                              "request": "request1",
                            },
                            { "id": 2, "name": "test2" },
                          ]

  /spexapis:
    get:
      tags:
        - Spex管理
      summary: 查询 给定模糊匹配name的api
      parameters:
        - name: name
          in: query
          description: api name
          required: true
          schema:
            type: string
        - name: topic
          in: query
          description: api topic
          required: false
          schema:
            type: string
        - name: with_default
          in: query
          description: Whether the field needs to be replaced with empty value of the corresponding type
          required: false
          schema:
            type: boolean

      responses:
        200:
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 2
                      items:
                        type: array
                        example:
                          [
                            {
                              "id": 1,
                              "name": "test1",
                              "topic": "topic1",
                              "service": "service1",
                              "request": "request1",
                            },
                            { "id": 2, "name": "test2" },
                          ]

  /spex_api_errors/{api_id}:
    get:
      tags:
        - Spex管理
      summary: 查询spex api的errors
      parameters:
        - name: api_id
          in: path
          description: api id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example: { "ERROR_INTERNAL": 118800000 }

  /spexdetail/{api_id}:
    get:
      tags:
        - Spex管理
      summary: 查询 Spex API 的详细信息
      parameters:
        - name: api_id
          in: path
          description: api_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      req_name:
                        type: string
                        example: "test"
                      request:
                        type: object
                        example: {}
                      resp_name:
                        type: string
                        example: "test"
                      response:
                        type: object
                        example: {}

  /spexupdate:
    post:
      tags:
        - Spex管理
      summary: 更新Spex资源
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                update_all:
                  type: boolean
                  example: true
                space_id_dict:
                  type: object
                  properties:
                    groups:
                      type: array
                      example: ["space_id"]
                    services:
                      type: array
                      example: ["space_id"]
                    topics:
                      type: object
                      example: { "service_space_id": ["topic_name"] }
                service_name:
                  type: string
                  example: "account.contact"
                topics:
                  type: array
                  example: ["master"]

        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: integer
                    example: 1234

  /spexpb:
    get:
      tags:
        - Spex管理
      summary: 获取对应的pb
      parameters:
        - name: service
          in: query
          description: service
          required: true
          schema:
            type: string
        - name: topic
          in: query
          description: topic
          required: true
          schema:
            type: string

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: string
                    example: "...."

  /pfbs/{api_id}:
    get:
      tags:
        - Spex管理
      summary: 获取api对应service的pfbs
      parameters:
        - name: api_id
          in: path
          description: api id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: ["sg"]

    delete:
      tags:
        - Spex管理
      summary: 删除某个pfb
      parameters:
        - name: api_id
          in: path
          description: api id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                pfb:
                  type: string
                  example: "sg"

        required: true

      responses:
        200:
          description: 删除pfb成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /spexservice:
    get:
      tags:
        - Spex管理
      summary: 查询 Spex Service
      parameters:
        - name: service_name
          in: query
          description: service name
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: Number of pages of the current query
          required: true
          schema:
            type: integer
        - name: per_page
          in: query
          description: Number of displays per page
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        example: [{ "id": 1, "name": "test" }]

  /http_projects:
    get:
      tags:
        - Http管理
      summary: 查询所有的http project

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: [{ "id": 1, "name": "test", "yapi_id": 123 }]

  /http_project/{project_id}:
    put:
      tags:
        - Http管理
      summary: 更新 http project ( 如 token )
      parameters:
        - name: project_id
          in: path
          description: project_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
                  example: "iafgcbdeuidhqwuiadh"

        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

    delete:
      tags:
        - Http管理
      summary: 删除http project
      parameters:
        - name: project_id
          in: path
          description: project_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 删除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /http_menu/{project_id}:
    get:
      tags:
        - Http管理
      summary: 查询http project下的所有目录
      parameters:
        - name: project_id
          in: path
          description: project_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: [{ "id": 1, "name": "cat1" }]

  /http_apis:
    get:
      tags:
        - Http管理
      summary: 查询目录下的所有api
      parameters:
        - name: project_id
          in: query
          description: project_id
          required: false
          schema:
            type: integer
        - name: menus
          in: query
          description: menu id list
          required: false
          schema:
            type: array
        - name: page
          in: query
          description: 返回第几页数据
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: 每页包含多少条数据
          required: false
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 2
                      items:
                        type: array
                        example:
                          [
                            { "id": 1, "name": "API1" },
                            { "id": 2, "name": "API2" },
                          ]

  /http_api_detail/{api_id}:
    get:
      tags:
        - Http管理
      summary: 查询api的详细信息
      parameters:
        - name: api_id
          in: path
          description: api_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      {
                        "method": "post",
                        "path": "/api/test",
                        "headers":
                          [
                            { "name": "Content-Length", "value": "128" },
                            { "name": "Cookie", "value": "c=123" },
                          ],
                        "params":
                          [
                            {
                              "_id": "62d8f987710105bcf9b71ea6",
                              "name": "param",
                              "example": "sg",
                              "desc": "",
                            },
                          ],
                        "query":
                          [
                            {
                              "name": "region",
                              "desc": "",
                              "type": "",
                              "example": "sg",
                              "required": True,
                            },
                            {
                              "name": "user",
                              "desc": "",
                              "type": "",
                              "example": "abc",
                              "required": False,
                            },
                          ],
                        "body":
                          {
                            "app_id": "INT64",
                            "app_info": { "app_name": "STRING" },
                            "app_list":
                              [{ "field_1": "STRING", "field_2": "BOOLEAN" }],
                            "app_list_2": [["string"]],
                          },
                        "response": { "err_msg": "STRING" },
                        "errors": { "ERROR": 10001 },
                      }

  /http_envs:
    get:
      tags:
        - Http管理
      summary: 查询http project下的所有env
      parameters:
        - name: project_id
          in: query
          description: project_id
          required: false
          schema:
            type: integer
        - name: yapi_project_token
          in: query
          description: yapi_project_token
          required: false
          schema:
            type: string
        - name: yapi_url
          in: query
          description: yapi_url
          required: false
          schema:
            type: string

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: [{ "id": 1, "name": "test" }]

  /http_env_detail/{env_id}:
    get:
      tags:
        - Http管理
      summary: 查询http env详情
      parameters:
        - name: env_id
          in: path
          description: env_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example:
                      {
                        "domain": "https://https://http-gateway.spex.test.shopee.sg",
                        "headers":
                          [
                            {
                              "name": "Content-Type",
                              "value": "application/json",
                            },
                          ],
                        "name": "test",
                        "id": 2,
                      }

  /http_api_errors/{api_id}:
    get:
      tags:
        - Http管理
      summary: 查询http api的errors
      parameters:
        - name: api_id
          in: path
          description: api id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example: { "ERROR_INTERNAL": 118800000 }

  /api_templates:
    get:
      tags:
        - Health Check
      summary: 查询所有由用户新增的template

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      {
                        api_id:
                          {
                            "api_path": "",
                            "api_name": "",
                            "topic": "",
                            "user_templates": [],
                            "templates_num": 0,
                          },
                      }

  /http_update:
    post:
      tags:
        - Http管理
      summary: 更新Http资源
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                project_id_list:
                  type: array
                  example: [1, 2, 3]
                yapi_project_token:
                  type: string
                  example: "abs"
                yapi_url:
                  type: string
                  example: "https://adp.i.sz.shopee.io"
                type:
                  type: string
                  example: "add/update"

        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: integer
                    example: 1234

  /spex_templates/{api_id}:
    get:
      tags:
        - Health Check
      summary: 查询对应SPEX API下的所有template
      parameters:
        - name: api_id
          in: path
          description: api_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        example:
                          [
                            {
                              "id": 1,
                              "name": "1",
                              "type": "1",
                              "author": "1",
                              "is_default": True,
                            },
                          ]

  /spex_template:
    post:
      tags:
        - Health Check
      summary: 新增spex template
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: test
                api_id:
                  type: integer
                  example: 1
                request:
                  type: object
                  properties:
                    name:
                      type: object
                      properties:
                        is_required:
                          type: boolean
                          example: false
                        allow_empty:
                          type: boolean
                          example: false
                        range:
                          type: array
                          example: [0, 4294967295]
                        default_value:
                          type: string
                          example: ""
                        type:
                          type: string
                          example: "UINT32"
                        user_input_cases:
                          type: array
                          example: []
                combination_rules:
                  type: array
                  example: ["{{task_id}} or {{task_name}}"]
                params:
                  type: object
                  example: { "requestType": { "type": "pfb", "value": "sg" } }
                user_specified_errors:
                  type: object
                  example:
                    {
                      "enum_error": [1],
                      "boundary_error": [2],
                      "empty_error": [3],
                      "required_error": [4],
                      "combination_error": [5],
                    }
        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /spex_template/{template_id}:
    get:
      tags:
        - Health Check
      summary: 查询对应spex template的具体信息
      parameters:
        - name: template_id
          in: path
          description: template_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      name:
                        type: string
                        example: test
                      service_name:
                        type: string
                        example: test
                      topic:
                        type: string
                        example: test
                      command:
                        type: string
                        example: test
                      request:
                        type: object
                        properties:
                          name:
                            type: object
                            properties:
                              is_required:
                                type: boolean
                                example: false
                              allow_empty:
                                type: boolean
                                example: false
                              range:
                                type: array
                                example: [0, 4294967295]
                              default_value:
                                type: string
                                example: ""
                              type:
                                type: string
                                example: "UINT32"
                              user_input_cases:
                                type: array
                                example: []
                      combination_rules:
                        type: array
                        example: ["{{task_id}} or {{task_name}}"]
                      params:
                        type: object
                        example:
                          { "requestType": { "type": "pfb", "value": "sg" } }
                      user_specified_errors:
                        type: object
                        example:
                          {
                            "enum_error": [1],
                            "boundary_error": [2],
                            "empty_error": [3],
                            "required_error": [4],
                            "combination_error": [5],
                          }

    put:
      tags:
        - Health Check
      summary: 更新spex template信息
      parameters:
        - name: template_id
          in: path
          description: template_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: 1
                author:
                  type: string
                  example: aaa
                request:
                  type: object
                  properties:
                    name:
                      type: object
                      properties:
                        is_required:
                          type: boolean
                          example: false
                        allow_empty:
                          type: boolean
                          example: false
                        range:
                          type: array
                          example: [0, 4294967295]
                        default_value:
                          type: string
                          example: ""
                        type:
                          type: string
                          example: "UINT32"
                        user_input_cases:
                          type: array
                          example: []
                is_default:
                  type: boolean
                  example: True
                combination_rules:
                  type: array
                  example: ["{{task_id}} or {{task_name}}"]
                params:
                  type: object
                  example: { "requestType": { "type": "pfb", "value": "sg" } }
                user_specified_errors:
                  type: object
                  example:
                    {
                      "enum_error": [1],
                      "boundary_error": [2],
                      "empty_error": [3],
                      "required_error": [4],
                      "combination_error": [5],
                    }

        required: true
      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

    delete:
      tags:
        - Health Check
      summary: 删除某个spex template
      parameters:
        - name: template_id
          in: path
          description: template_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 删除template成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /spex_basic_template/{api_id}:
    get:
      tags:
        - Health Check
      summary: 生成spex basic template（调试使用）
      parameters:
        - name: api_id
          in: path
          description: api_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example: { ... }

  /http_template/{template_id}:
    get:
      tags:
        - Health Check
      summary: 查询对应http template的具体信息
      parameters:
        - name: template_id
          in: path
          description: template_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      name:
                        type: string
                        example: test
                      path:
                        type: string
                        example: "/api/test"
                      header:
                        type: object
                        example: {}
                      query:
                        type: object
                        example: {}
                      request:
                        type: object
                        properties:
                          name:
                            type: object
                            properties:
                              is_required:
                                type: boolean
                                example: false
                              allow_empty:
                                type: boolean
                                example: false
                              range:
                                type: array
                                example: [0, 4294967295]
                              default_value:
                                type: string
                                example: ""
                              type:
                                type: string
                                example: "UINT32"
                              user_input_cases:
                                type: array
                                example: []
                      combination_rules:
                        type: array
                        example: ["{{task_id}} or {{task_name}}"]
                      default_request:
                        type: object
                        example: {}
                      user_specified_errors:
                        type: object
                        example:
                          {
                            "enum_error": [1],
                            "boundary_error": [2],
                            "empty_error": [3],
                            "required_error": [4],
                            "combination_error": [5],
                          }

    put:
      tags:
        - Health Check
      summary: 更新 http template信息
      parameters:
        - name: template_id
          in: path
          description: template_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: 1
                author:
                  type: string
                  example: aaa
                query:
                  type: object
                  example: {}
                request:
                  type: object
                  properties:
                    name:
                      type: object
                      properties:
                        is_required:
                          type: boolean
                          example: false
                        allow_empty:
                          type: boolean
                          example: false
                        range:
                          type: array
                          example: [0, 4294967295]
                        default_value:
                          type: string
                          example: ""
                        type:
                          type: string
                          example: "UINT32"
                        user_input_cases:
                          type: array
                          example: []
                is_default:
                  type: boolean
                  example: True
                combination_rules:
                  type: array
                  example: ["{{task_id}} or {{task_name}}"]
                default_request:
                  type: object
                  example: {}
                user_specified_errors:
                  type: object
                  example:
                    {
                      "enum_error": [1],
                      "boundary_error": [2],
                      "empty_error": [3],
                      "required_error": [4],
                      "combination_error": [5],
                    }

        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

    delete:
      tags:
        - Health Check
      summary: 删除某个 http template
      parameters:
        - name: template_id
          in: path
          description: template_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 删除template成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /hc_plans:
    get:
      tags:
        - Health Check
      summary: 查询所有Health check plan
      parameters:
        - name: service_id
          in: query
          description: service id
          required: false
          schema:
            type: integer
        - name: plan_name
          in: query
          description: plan name
          required: false
          schema:
            type: string
        - name: author
          in: query
          description: author
          required: false
          schema:
            type: string
        - name: type
          in: query
          description: spex or http
          required: true
          schema:
            type: string
        - name: http_project_id
          in: query
          description: http project id
          required: false
          schema:
            type: integer
        - name: page
          in: query
          description: Number of pages of the current query
          required: true
          schema:
            type: integer
        - name: per_page
          in: query
          description: Number of displays per page
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 1
                      items:
                        type: array
                        example:
                          [
                            {
                              "id": 1,
                              "name": test,
                              "author": test,
                              "updated_time": 2022-02-02 12:20:20,
                            },
                          ]

  /spex_plan:
    post:
      tags:
        - Health Check
      summary: 新增spex plan
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: test
                author:
                  type: string
                  example: test
                service_id:
                  type: integer
                  example: 1
                server_name:
                  type: integer
                  example: noti.admin_marketpush
                config_key:
                  type: string
                  example: "abcdefg"
                topic:
                  type: string
                  example: test
                command:
                  type: array
                  example: ["api_1", "api_2"]
                env:
                  type: string
                  example: test
                params:
                  type: object
                  example: { "requestType": { "type": "pfb", "value": "sg" } }
        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /spex_plan/{plan_id}:
    get:
      tags:
        - Health Check
      summary: 查询对应spex plan的具体信息
      parameters:
        - name: plan_id
          in: path
          description: plan_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      name:
                        type: string
                        example: test
                      service_name:
                        type: string
                        example: test
                      topic:
                        type: string
                        example: test
                      command:
                        type: string
                        example: ["api_1", "api_2"]
                      env:
                        type: string
                        example: "test"
                      params:
                        type: object
                        example:
                          { "requestType": { "type": "pfb", "value": "sg" } }

    put:
      tags:
        - Health Check
      summary: 更新spex plan信息
      parameters:
        - name: plan_id
          in: path
          description: plan_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "test"
                topic:
                  type: string
                  example: "test"
                command:
                  type: array
                  example: ["api_1", "api_2"]
                env:
                  type: string
                  example: "test"
                params:
                  type: object
                  example: { "requestType": { "type": "pfb", "value": "sg" } }
        required: true
      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

    delete:
      tags:
        - Health Check
      summary: 删除某个spex plan
      parameters:
        - name: plan_id
          in: path
          description: plan_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 删除plan成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /spex_config:
    get:
      tags:
        - Health Check
      summary: 获取spex默认的配置

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      service_name:
                        type: string
                        example: "app.tcp_server"
                      config_key:
                        type: string
                        example: "9d167d37d80016fb4f16f7acaec7cc0ea3bcb92d20694eb6c9bc5771ff2cbc48"

  /hc_plan_results:
    get:
      tags:
        - Health Check
      summary: 查询对应plan下的所有plan result
      parameters:
        - name: plan_id
          in: query
          description: plan id
          required: false
          schema:
            type: integer
        - name: http_plan_id
          in: query
          description: http plan id
          required: false
          schema:
            type: integer
        - name: type
          in: query
          description: spex or http
          required: true
          schema:
            type: string
        - name: plan_name
          in: query
          description: plan name
          required: false
          schema:
            type: string
        - name: runner
          in: query
          description: runner
          required: false
          schema:
            type: string
        - name: status
          in: query
          description: status
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: Number of pages of the current query
          required: true
          schema:
            type: integer
        - name: per_page
          in: query
          description: Number of displays per page
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 3
                      items:
                        type: array
                        example:
                          [
                            {
                              "id": 1,
                              "name": "test",
                              "author": "test",
                              "updated_time": 20220228 12:22:22,
                              "finish_rate": 0.8,
                              "status": "running",
                              "html": "",
                              "logs": [],
                            },
                          ]

  /hc_plan_result_detail/{plan_result_id}:
    get:
      tags:
        - Health Check
      summary: 查询 plan result 详情
      parameters:
        - name: plan_result_id
          in: path
          description: plan result id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 查询成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      {
                        "logs": [],
                        "id": 22,
                        "created_time": "2022-05-07T14:23:54.853409",
                        "html": "test.html",
                        "plan_id": 12,
                        "status": "done/error",
                        "plan_name": "test",
                        "api_type": "spex/http",
                        "runner": "test001@shopee.com",
                        "updated_time": "2022-05-07T14:27:35.043458",
                        "finish_rate": 1,
                        "total_num": 0,
                        "pass_num": 0,
                        "fail_num": 0,
                        "error_num": 0,
                        "categories":
                          {
                            "Default Case":
                              {
                                "total_num": 0,
                                "pass_num": 0,
                                "fail_num": 0,
                                "error_num": 0,
                              },
                            "Required Check": { ... },
                            "Empty Check": { ... },
                            "Range Check": { ... },
                            "Combination Check": { ... },
                            "Type Check": { ... },
                          },
                      }

  /hc_case_results:
    get:
      tags:
        - Health Check
      summary: 查询 plan result 下的 case results 详情
      parameters:
        - name: plan_result_id
          in: query
          description: plan result id
          required: true
          schema:
            type: integer
        - name: case_type
          in: query
          description: case type
          required: true
          schema:
            type: string
            example: "All/Default Case/Required Check/Empty Check/Range Check/Combination Check/Type Check"

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      {
                        "total_num": 0,
                        "pass_num": 0,
                        "fail_num": 0,
                        "error_num": 0,
                        "cases":
                          {
                            "pass":
                              [
                                {
                                  "id": 1,
                                  "case_result_id": 1,
                                  "case_name": "test",
                                },
                              ],
                            "fail": [],
                            "error": [],
                          },
                      }

  /hc_case_result/{case_result_id}:
    get:
      tags:
        - Health Check
      summary: 查询 case result 详情
      parameters:
        - name: case_result_id
          in: path
          description: case result id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      {
                        "case_id": 1,
                        "template_id": 1,
                        "api_type": "spex",
                        "topic": "master",
                        "service_name": "test",
                        "project_id": 1,
                        "api_id": 1,
                        "api_name": "test",
                        "case_name": "test",
                        "status": "pass",
                        "fixed": True,
                        "request": {},
                        "actual_response": {},
                        "actual_errCode": [],
                        "expect_response": {},
                        "expect_errCode": [],
                      }

    put:
      tags:
        - Health Check
      summary: 更新 case result
      parameters:
        - name: case_result_id
          in: path
          description: case result id
          required: true
          schema:
            type: integer

      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  example: "pass"

        required: true

      responses:
        200:
          description: 更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /http_plan:
    post:
      tags:
        - Health Check
      summary: 新增http plan
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: test
                author:
                  type: string
                  example: test
                http_project_id:
                  type: integer
                  example: 1
                env_id:
                  type: integer
                  example: 1
                apis:
                  type: array
                  example: [1]

        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /http_plan/{plan_id}:
    get:
      tags:
        - Health Check
      summary: 查询对应plan的具体信息
      parameters:
        - name: plan_id
          in: path
          description: plan_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      name:
                        type: string
                        example: "test"
                      author:
                        type: string
                        example: "test"
                      env_id:
                        type: integer
                        example: 1
                      http_project_id:
                        type: integer
                        example: 1
                      http_project_name:
                        type: string
                        example: "test"
                      apis:
                        type: array
                        example: [api_id]

    put:
      tags:
        - Health Check
      summary: 更新 http plan 信息
      parameters:
        - name: plan_id
          in: path
          description: plan_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "test"
                env_id:
                  type: integer
                  example: 1
                command:
                  type: array
                  example: [1]

        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

    delete:
      tags:
        - Health Check
      summary: 删除某个 http plan
      parameters:
        - name: plan_id
          in: path
          description: plan_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 删除plan成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /hc_run/{plan_id}:
    post:
      tags:
        - Health Check
      summary: 执行对应的plan
      parameters:
        - name: plan_id
          in: path
          description: plan_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                api_type:
                  type: string
                  example: "spex/http"

        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /hc_rerun/{plan_id}:
    post:
      tags:
        - Health Check
      summary: 执行对应的plan
      parameters:
        - name: plan_id
          in: path
          description: plan_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                plan_result_id:
                  type: integer
                  example: 1
                api_type:
                  type: string
                  example: "spex/http"
        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /spex_autocheck/{api_id}:
    post:
      tags:
        - Health Check
      summary: api auto check
      parameters:
        - name: api_id
          in: path
          description: api_id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /spex_batch_autocheck/{service_id}:
    post:
      tags:
        - Health Check
      summary: api batch auto check
      parameters:
        - name: service_id
          in: path
          description: service_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                plan_name:
                  type: string
                  example: test
                topic:
                  type: string
                  example: test
                env:
                  type: string
                  example: test
                apis:
                  type: array
                  example: [1, 2, 3]

        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /allaps:
    get:
      tags:
        - others
      summary: 查询当前所有的定时任务

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: array
                    example: []

  /deleteaps/{id}:
    delete:
      tags:
        - others
      summary: 删除定时任务
      parameters:
        - name: id
          in: path
          description: 定时任务id
          required: true
          schema:
            type: integer
      responses:
        200:
          description: 定时任务删除成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object

  /changeaps:
    post:
      tags:
        - others
      summary: 指定当前webserver执行定时任务

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /postwomen/spex/{api_id}:
    post:
      tags:
        - postwomen 管理
      summary: 在线执行spex接口
      parameters:
        - name: api_id
          in: path
          description: api_id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                request:
                  type: object
                  example: {}
                params:
                  type: object
                  example: { "pfb": "sg" }
        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      {
                        "status": "done",
                        "errorCode": 0,
                        "trace_id": "",
                        "response": {},
                      }

  /postwomen/http:
    get:
      tags:
        - postwomen 管理
      summary: 获取curl命令
      parameters:
        - name: method
          in: query
          description: method
          required: true
          schema:
            type: string
        - name: url
          in: query
          description: url
          required: true
          schema:
            type: string
        - name: headers
          in: query
          description: headers
          required: true
          schema:
            type: string
        - name: body
          in: query
          description: body
          required: true
          schema:
            type: string

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: string
                    example: "curl -x ..."

    post:
      tags:
        - postwomen 管理
      summary: 通过http gateway的方式执行接口
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                method:
                  type: string
                  example: "get/put/post/delete"
                url:
                  type: string
                  example: ""
                headers:
                  type: string
                  example: "{}"
                request:
                  type: string
                  example: "{}"
        required: true

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      {
                        "status_code": 200,
                        "response_headers": {},
                        "response": {},
                      }

  /postwomenresult/{exec_id}:
    get:
      tags:
        - postwomen 管理
      summary: 查询spex接口执行结果
      parameters:
        - name: exec_id
          in: path
          description: executor id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example:
                      { "status": "done", "errorCode": 0, "response": {} }

  /postwomen_templates/{api_id}:
    get:
      tags:
        - postwomen 管理
      summary: 查询对应api下的template
      parameters:
        - name: api_id
          in: path
          description: api id
          required: true
          schema:
            type: integer
        - name: name
          in: query
          description: template name
          required: false
          schema:
            type: string
        - name: author
          in: query
          description: author
          required: false
          schema:
            type: string
        - name: page
          in: query
          description: Number of pages of the current query
          required: false
          schema:
            type: integer
        - name: per_page
          in: query
          description: Number of displays per page
          required: false
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 3
                      items:
                        type: array
                        example:
                          [
                            {
                              "id": 1,
                              "name": "test",
                              "author": "test",
                              "description": "test....",
                              "request": "{}",
                              "updated_time": "2022-04-14",
                              "is_demo": true,
                              "url": "",
                              "method": "get",
                              "headers": "{}",
                            },
                          ]

  /postwomen_template/{id}:
    get:
      tags:
        - postwomen 管理
      summary: 查询对应的template
      parameters:
        - name: id
          in: path
          description: template id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 3
                      items:
                        type: array
                        example:
                          [
                            {
                              "id": 1,
                              "name": "test",
                              "description": "test....",
                              "topic": "master",
                              "request": "{}",
                              "url": "",
                              "method": "",
                              "headers": "{}",
                            },
                          ]

    put:
      tags:
        - postwomen 管理
      summary: 更新template信息
      parameters:
        - name: id
          in: path
          description: template id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: "test"
                description:
                  type: string
                  example: "test..."
                request:
                  type: string
                  example: "{}"
                is_demo:
                  type: boolean
                  example: true
                url:
                  type: string
                  example: ""
                method:
                  type: string
                  example: "get/post/put/delete"
                headers:
                  type: string
                  example: "{}"

        required: true

      responses:
        200:
          description: 更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

    delete:
      tags:
        - postwomen 管理
      summary: 删除某个template
      parameters:
        - name: id
          in: path
          description: template id
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 删除template成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success

  /szqa_dependency:
    get:
      tags:
        - worker
      summary: 查询worker官方依赖的版本

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example: {}

    put:
      tags:
        - worker
      summary: 更新所有worker官方依赖的路径
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                use_latest:
                  type: boolean
                  example: False
                new_path:
                  type: string
                  example: ""

        required: true

      responses:
        200:
          description: 更新成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: integer
                    example: 123

    post:
      tags:
        - worker
      summary: 更新worker的官方依赖

      responses:
        200:
          description: 创建成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: integer
                    example: 123

  /dependency_result/{key}:
    get:
      tags:
        - worker
      summary: 查询对应key的结果
      parameters:
        - name: key
          in: path
          description: key
          required: true
          schema:
            type: integer

      responses:
        200:
          description: 执行成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
                  data:
                    type: object
                    example: {}

  /bgsuite:
    get:
      tags:
        - others
      summary: bg for suite
      responses:
        200:
          description: bg for suite
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  msg:
                    type: string
                    example: success
